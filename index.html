<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Magic Collection Manager PRO</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="toast-container"></div>

    <header>
      <h1>Magic: The Gathering Manager</h1>
      <nav>
        <button id="nav-search" class="nav-btn active">üîç Recherche</button>
        <button id="nav-collection" class="nav-btn">üìö Collection</button>
        <button id="nav-decks" class="nav-btn">üÉè Mes Decks</button>
      </nav>
    </header>

    <main>
      <section id="search-view">
        <div class="search-panel">
          <div class="search-main">
            <input
              type="text"
              id="search-input"
              placeholder="Nom de la carte, texte, capacit√©..."
            />
          </div>

          <div class="filter-group full-width">
            <label>Couleurs requises :</label>
            <div class="color-checkbox-grid">
              <label class="color-chip"
                ><input type="checkbox" class="color-checkbox" value="W" />
                <span>‚ö™ Blanc</span></label
              >
              <label class="color-chip"
                ><input type="checkbox" class="color-checkbox" value="U" />
                <span>üîµ Bleu</span></label
              >
              <label class="color-chip"
                ><input type="checkbox" class="color-checkbox" value="B" />
                <span>‚ö´ Noir</span></label
              >
              <label class="color-chip"
                ><input type="checkbox" class="color-checkbox" value="R" />
                <span>üî¥ Rouge</span></label
              >
              <label class="color-chip"
                ><input type="checkbox" class="color-checkbox" value="G" />
                <span>üü¢ Vert</span></label
              >
              <label class="color-chip"
                ><input type="checkbox" class="color-checkbox" value="C" />
                <span>üíø Incolore</span></label
              >
            </div>
          </div>
          <div class="filter-group full-width">
            <label>Nombre exact de couleurs :</label>
            <div class="color-count-selector">
              <button type="button" class="count-btn" data-count="0">
                0 (Incolore)
              </button>
              <button type="button" class="count-btn" data-count="1">1</button>
              <button type="button" class="count-btn" data-count="2">2</button>
              <button type="button" class="count-btn" data-count="3">3</button>
              <button type="button" class="count-btn" data-count="4">4</button>
              <button type="button" class="count-btn" data-count="5">5</button>
              </button>
            </div>
          </div>

          <div class="search-filters-grid">
            <div class="filter-group">
              <label>Trier par</label>
              <select
                id="search-sort-select"
                style="background: #e8f8f5; border-color: #27ae60"
              >
                <option value="name|asc">Nom (A-Z)</option>
                <option value="eur|desc">Prix : Plus cher</option>
                <option value="eur|asc">Prix : Moins cher</option>
                <option value="released|desc">Date de sortie</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Langue</label>
              <select id="language-select">
                <option value="">Anglais (D√©faut)</option>
                <option value="lang:fr">Fran√ßais</option>
                <option value="lang:de">Allemand</option>
                <option value="lang:it">Italien</option>
                <option value="lang:es">Espagnol</option>
                <option value="lang:pt">Portugais</option>
                <option value="lang:ja">Japonais</option>
                <option value="lang:ko">Cor√©en</option>
                <option value="lang:ru">Russe</option>
                <option value="lang:zhs">Chinois Simplifi√©</option>
                <option value="lang:ph">Phyrexian</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Type</label>
              <select id="type-select">
                <option value="">Tous</option>
                <option value="creature">Cr√©ature</option>
                <option value="planeswalker">Planeswalker</option>
                <option value="instant">√âph√©m√®re</option>
                <option value="sorcery">Rituel</option>
                <option value="enchantment">Enchantement</option>
                <option value="artifact">Artefact</option>
                <option value="battle">Bataille</option>
                <option value="land">Terrain</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Raret√©</label>
              <select id="rarity-select">
                <option value="">Toutes</option>
                <option value="r:common">Commune</option>
                <option value="r:uncommon">Inhabituelle</option>
                <option value="r:rare">Rare</option>
                <option value="r:mythic">Mythique</option>
              </select>
            </div>

            <div class="filter-group">
              <label>Artiste</label>
              <input
                type="text"
                id="artist-search-input"
                placeholder="ex: Magali Villeneuve"
              />
            </div>

            <div class="filter-group">
              <label>Extension</label>
              <select id="set-select">
                <option value="">Toutes les extensions</option>
              </select>
            </div>
          </div>

          <div class="search-action">
            <button id="search-btn">üîç Lancer la Recherche</button>
          </div>
        </div>
        <div id="results-grid" class="card-grid"></div>
      </section>

      <section id="collection-view" class="hidden">
        <div class="collection-header">
          <h2>
            Ma Collection (<span id="total-price-display" style="color: #27ae60"
              >0.00‚Ç¨</span
            >)
          </h2>
          <div id="active-deck-indicator" class="active-deck-banner hidden">
            Mode Ajout vers : <strong id="active-deck-name-display">---</strong>
            <button onclick="deselectDeck()" class="small-btn">
              Terminer / Annuler
            </button>
          </div>
        </div>

        <div class="collection-filters">
          <input
            type="text"
            id="searchCollection"
            placeholder="Filtrer par nom..."
          />

          <select
            id="col-sort-price"
            style="background: #e8f8f5; border-color: #27ae60"
          >
            <option value="none">Trier par...</option>
            <option value="price_desc">Prix : Plus cher en premier</option>
            <option value="price_asc">Prix : Moins cher en premier</option>
            <option value="name_asc">Nom (A-Z)</option>
            <option value="rarity_desc">Raret√©</option>
          </select>

          <select id="col-filter-color">
            <option value="">Toutes couleurs</option>
            <option value="W">Blanc</option>
            <option value="U">Bleu</option>
            <option value="B">Noir</option>
            <option value="R">Rouge</option>
            <option value="G">Vert</option>
          </select>
          <input type="text" id="col-filter-set" placeholder="Extension..." />
          <input type="text" id="col-filter-artist" placeholder="Artiste..." />
        </div>
        <div id="collection-grid" class="card-grid"></div>
      </section>

      <section id="decks-view" class="hidden">
        <div class="search-panel">
          <h2>Nouveau Deck</h2>
          <div class="deck-creation-bar">
            <input
              type="text"
              id="new-deck-name"
              placeholder="Nom du deck..."
            />
            <select id="new-deck-format">
              <optgroup label="Classique (60 cartes)">
                <option value="Standard">Standard</option>
                <option value="Modern">Modern</option>
                <option value="Pioneer">Pioneer</option>
                <option value="Legacy">Legacy</option>
                <option value="Pauper">Pauper</option>
              </optgroup>
              <optgroup label="Arena">
                <option value="Historic">Historique</option>
                <option value="Timeless">Intemporel</option>
                <option value="Brawl">Brawl</option>
              </optgroup>
              <optgroup label="Multijoueur (100 cartes)">
                <option value="Commander">Commander (EDH)</option>
              </optgroup>
              <option value="Libre">Libre / Autre</option>
            </select>
            <button
              onclick="createNewDeck()"
              class="add-btn"
              style="background: #27ae60; padding: 10px 20px"
            >
              + Cr√©er le Deck
            </button>
          </div>
          <hr style="margin: 20px 0; opacity: 0.1" />
          <h2>Mes Decks</h2>
          <div id="decks-list"></div>
        </div>
      </section>

      <section id="deck-detail-view" class="hidden">
        <div class="deck-header-info">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 20px;
            "
          >
            <button onclick="switchView(decksView)" class="nav-btn">
              ‚Üê Retour
            </button>
            <button
              id="add-more-btn"
              class="nav-btn active"
              style="background: #3498db"
            >
              + Ajouter des cartes depuis ma collection
            </button>
          </div>
          <h2 id="detail-deck-name"></h2>
          <p
            id="detail-deck-stats"
            style="color: #666; margin-bottom: 20px"
          ></p>
        </div>
        <div id="deck-cards-grid" class="card-grid"></div>
      </section>
    </main>

    <div id="card-modal" class="modal hidden">
      <span class="close-modal" onclick="closeModal()">&times;</span>
      <img class="modal-content" id="modal-img" />
    </div>

    <script src="app.js"></script>
  </body>
</html>
